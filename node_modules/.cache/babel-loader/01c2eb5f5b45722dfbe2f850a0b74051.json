{"ast":null,"code":"(function () {\n  // Schedule Template - by CodyHouse.co\n  function ScheduleTemplate(element) {\n    this.element = element;\n    this.timelineItems = this.element.getElementsByClassName('cd-schedule__timeline')[0].getElementsByTagName('li');\n    this.timelineStart = getScheduleTimestamp(this.timelineItems[0].textContent);\n    this.timelineUnitDuration = getScheduleTimestamp(this.timelineItems[1].textContent) - getScheduleTimestamp(this.timelineItems[0].textContent);\n    this.topInfoElement = this.element.getElementsByClassName('cd-schedule__top-info')[0];\n    this.singleEvents = this.element.getElementsByClassName('cd-schedule__event');\n    this.modal = this.element.getElementsByClassName('cd-schedule-modal')[0];\n    this.modalHeader = this.element.getElementsByClassName('cd-schedule-modal__header')[0];\n    this.modalHeaderBg = this.element.getElementsByClassName('cd-schedule-modal__header-bg')[0];\n    this.modalBody = this.element.getElementsByClassName('cd-schedule-modal__body')[0];\n    this.modalBodyBg = this.element.getElementsByClassName('cd-schedule-modal__body-bg')[0];\n    this.modalClose = this.modal.getElementsByClassName('cd-schedule-modal__close')[0];\n    this.modalDate = this.modal.getElementsByClassName('cd-schedule-modal__date')[0];\n    this.modalEventName = this.modal.getElementsByClassName('cd-schedule-modal__name')[0];\n    this.coverLayer = this.element.getElementsByClassName('cd-schedule__cover-layer')[0];\n    this.modalMaxWidth = 800;\n    this.modalMaxHeight = 480;\n    this.animating = false;\n    this.supportAnimation = Util.cssSupports('transition');\n    this.initSchedule();\n  }\n\n  ;\n\n  ScheduleTemplate.prototype.initSchedule = function () {\n    this.scheduleReset();\n    this.initEvents();\n  };\n\n  ScheduleTemplate.prototype.scheduleReset = function () {\n    // according to the mq value, init the style of the template\n    var mq = this.mq(),\n        loaded = Util.hasClass(this.element, 'js-schedule-loaded'),\n        modalOpen = Util.hasClass(this.modal, 'cd-schedule-modal--open');\n\n    if (mq == 'desktop' && !loaded) {\n      Util.addClass(this.element, 'js-schedule-loaded');\n      this.placeEvents();\n      modalOpen && this.checkEventModal(modalOpen);\n    } else if (mq == 'mobile' && loaded) {\n      //in this case you are on a mobile version (first load or resize from desktop)\n      Util.removeClass(this.element, 'cd-schedule--loading js-schedule-loaded');\n      this.resetEventsStyle();\n      modalOpen && this.checkEventModal();\n    } else if (mq == 'desktop' && modalOpen) {\n      //on a mobile version with modal open - need to resize/move modal window\n      this.checkEventModal(modalOpen);\n      Util.removeClass(this.element, 'cd-schedule--loading');\n    } else {\n      Util.removeClass(this.element, 'cd-schedule--loading');\n    }\n  };\n\n  ScheduleTemplate.prototype.resetEventsStyle = function () {\n    // remove js style applied to the single events\n    for (var i = 0; i < this.singleEvents.length; i++) {\n      this.singleEvents[i].removeAttribute('style');\n    }\n  };\n\n  ScheduleTemplate.prototype.placeEvents = function () {\n    // on big devices - place events in the template according to their time/day\n    var self = this,\n        slotHeight = this.topInfoElement.offsetHeight;\n\n    for (var i = 0; i < this.singleEvents.length; i++) {\n      var anchor = this.singleEvents[i].getElementsByTagName('a')[0];\n      var start = getScheduleTimestamp(anchor.getAttribute('data-start')),\n          duration = getScheduleTimestamp(anchor.getAttribute('data-end')) - start;\n      var eventTop = slotHeight * (start - self.timelineStart) / self.timelineUnitDuration,\n          eventHeight = slotHeight * duration / self.timelineUnitDuration;\n      this.singleEvents[i].setAttribute('style', 'top: ' + (eventTop - 1) + 'px; height: ' + (eventHeight + 1) + 'px');\n    }\n\n    Util.removeClass(this.element, 'cd-schedule--loading');\n  };\n\n  ScheduleTemplate.prototype.initEvents = function () {\n    var self = this;\n\n    for (var i = 0; i < this.singleEvents.length; i++) {\n      // open modal when user selects an event\n      this.singleEvents[i].addEventListener('click', function (event) {\n        event.preventDefault();\n        if (!self.animating) self.openModal(this.getElementsByTagName('a')[0]);\n      });\n    } //close modal window\n\n\n    this.modalClose.addEventListener('click', function (event) {\n      event.preventDefault();\n      if (!self.animating) self.closeModal();\n    });\n    this.coverLayer.addEventListener('click', function (event) {\n      event.preventDefault();\n      if (!self.animating) self.closeModal();\n    });\n  };\n\n  ScheduleTemplate.prototype.openModal = function (target) {\n    var self = this;\n    var mq = self.mq();\n    this.animating = true; //update event name and time\n\n    this.modalEventName.textContent = target.getElementsByTagName('em')[0].textContent;\n    this.modalDate.textContent = target.getAttribute('data-start') + ' - ' + target.getAttribute('data-end');\n    this.modal.setAttribute('data-event', target.getAttribute('data-event')); //update event content\n\n    this.loadEventContent(target.getAttribute('data-content'));\n    Util.addClass(this.modal, 'cd-schedule-modal--open');\n    setTimeout(function () {\n      //fixes a flash when an event is selected - desktop version only\n      Util.addClass(target.closest('li'), 'cd-schedule__event--selected');\n    }, 10);\n\n    if (mq == 'mobile') {\n      self.modal.addEventListener('transitionend', function cb() {\n        self.animating = false;\n        self.modal.removeEventListener('transitionend', cb);\n      });\n    } else {\n      var eventPosition = target.getBoundingClientRect(),\n          eventTop = eventPosition.top,\n          eventLeft = eventPosition.left,\n          eventHeight = target.offsetHeight,\n          eventWidth = target.offsetWidth;\n      var windowWidth = window.innerWidth,\n          windowHeight = window.innerHeight;\n      var modalWidth = windowWidth * .8 > self.modalMaxWidth ? self.modalMaxWidth : windowWidth * .8,\n          modalHeight = windowHeight * .8 > self.modalMaxHeight ? self.modalMaxHeight : windowHeight * .8;\n      var modalTranslateX = parseInt((windowWidth - modalWidth) / 2 - eventLeft),\n          modalTranslateY = parseInt((windowHeight - modalHeight) / 2 - eventTop);\n      var HeaderBgScaleY = modalHeight / eventHeight,\n          BodyBgScaleX = modalWidth - eventWidth; //change modal height/width and translate it\n\n      self.modal.setAttribute('style', 'top:' + eventTop + 'px;left:' + eventLeft + 'px;height:' + modalHeight + 'px;width:' + modalWidth + 'px;transform: translateY(' + modalTranslateY + 'px) translateX(' + modalTranslateX + 'px)'); //set modalHeader width\n\n      self.modalHeader.setAttribute('style', 'width:' + eventWidth + 'px'); //set modalBody left margin\n\n      self.modalBody.setAttribute('style', 'margin-left:' + eventWidth + 'px'); //change modalBodyBg height/width ans scale it\n\n      self.modalBodyBg.setAttribute('style', 'height:' + eventHeight + 'px; width: 1px; transform: scaleY(' + HeaderBgScaleY + ') scaleX(' + BodyBgScaleX + ')'); //change modal modalHeaderBg height/width and scale it\n\n      self.modalHeaderBg.setAttribute('style', 'height: ' + eventHeight + 'px; width: ' + eventWidth + 'px; transform: scaleY(' + HeaderBgScaleY + ')');\n      self.modalHeaderBg.addEventListener('transitionend', function cb() {\n        //wait for the  end of the modalHeaderBg transformation and show the modal content\n        self.animating = false;\n        Util.addClass(self.modal, 'cd-schedule-modal--animation-completed');\n        self.modalHeaderBg.removeEventListener('transitionend', cb);\n      });\n    } //if browser do not support transitions -> no need to wait for the end of it\n\n\n    this.animationFallback();\n  };\n\n  ScheduleTemplate.prototype.closeModal = function () {\n    var self = this;\n    var mq = self.mq();\n    var item = self.element.getElementsByClassName('cd-schedule__event--selected')[0],\n        target = item.getElementsByTagName('a')[0];\n    this.animating = true;\n\n    if (mq == 'mobile') {\n      Util.removeClass(this.modal, 'cd-schedule-modal--open');\n      self.modal.addEventListener('transitionend', function cb() {\n        Util.removeClass(self.modal, 'cd-schedule-modal--content-loaded');\n        Util.removeClass(item, 'cd-schedule__event--selected');\n        self.animating = false;\n        self.modal.removeEventListener('transitionend', cb);\n      });\n    } else {\n      var eventPosition = target.getBoundingClientRect(),\n          eventTop = eventPosition.top,\n          eventLeft = eventPosition.left,\n          eventHeight = target.offsetHeight,\n          eventWidth = target.offsetWidth;\n      var modalStyle = window.getComputedStyle(self.modal),\n          modalTop = Number(modalStyle.getPropertyValue('top').replace('px', '')),\n          modalLeft = Number(modalStyle.getPropertyValue('left').replace('px', ''));\n      var modalTranslateX = eventLeft - modalLeft,\n          modalTranslateY = eventTop - modalTop;\n      Util.removeClass(this.modal, 'cd-schedule-modal--open cd-schedule-modal--animation-completed'); //change modal width/height and translate it\n\n      self.modal.style.width = eventWidth + 'px';\n      self.modal.style.height = eventHeight + 'px';\n      self.modal.style.transform = 'translateX(' + modalTranslateX + 'px) translateY(' + modalTranslateY + 'px)'; //scale down modalBodyBg element\n\n      self.modalBodyBg.style.transform = 'scaleX(0) scaleY(1)'; //scale down modalHeaderBg element\n      // self.modalHeaderBg.setAttribute('style', 'transform: scaleY(1)');\n\n      self.modalHeaderBg.style.transform = 'scaleY(1)';\n      self.modalHeaderBg.addEventListener('transitionend', function cb() {\n        //wait for the  end of the modalHeaderBg transformation and reset modal style\n        Util.addClass(self.modal, 'cd-schedule-modal--no-transition');\n        setTimeout(function () {\n          self.modal.removeAttribute('style');\n          self.modalBody.removeAttribute('style');\n          self.modalHeader.removeAttribute('style');\n          self.modalHeaderBg.removeAttribute('style');\n          self.modalBodyBg.removeAttribute('style');\n        }, 10);\n        setTimeout(function () {\n          Util.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n        }, 20);\n        self.animating = false;\n        Util.removeClass(self.modal, 'cd-schedule-modal--content-loaded');\n        Util.removeClass(item, 'cd-schedule__event--selected');\n        self.modalHeaderBg.removeEventListener('transitionend', cb);\n      });\n    } //if browser do not support transitions -> no need to wait for the end of it\n\n\n    this.animationFallback();\n  };\n\n  ScheduleTemplate.prototype.checkEventModal = function (modalOpen) {\n    // this function is used on resize to reset events/modal style\n    this.animating = true;\n    var self = this;\n    var mq = this.mq();\n\n    if (mq == 'mobile') {\n      //reset modal style on mobile\n      self.modal.removeAttribute('style');\n      self.modalBody.removeAttribute('style');\n      self.modalHeader.removeAttribute('style');\n      self.modalHeaderBg.removeAttribute('style');\n      self.modalBodyBg.removeAttribute('style');\n      Util.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n      self.animating = false;\n    } else if (mq == 'desktop' && modalOpen) {\n      Util.addClass(self.modal, 'cd-schedule-modal--no-transition cd-schedule-modal--animation-completed');\n      var item = self.element.getElementsByClassName('cd-schedule__event--selected')[0],\n          target = item.getElementsByTagName('a')[0];\n      var eventPosition = target.getBoundingClientRect(),\n          eventTop = eventPosition.top,\n          eventLeft = eventPosition.left,\n          eventHeight = target.offsetHeight,\n          eventWidth = target.offsetWidth;\n      var windowWidth = window.innerWidth,\n          windowHeight = window.innerHeight;\n      var modalWidth = windowWidth * .8 > self.modalMaxWidth ? self.modalMaxWidth : windowWidth * .8,\n          modalHeight = windowHeight * .8 > self.modalMaxHeight ? self.modalMaxHeight : windowHeight * .8;\n      var HeaderBgScaleY = modalHeight / eventHeight,\n          BodyBgScaleX = modalWidth - eventWidth;\n      setTimeout(function () {\n        self.modal.setAttribute('style', 'top:' + (windowHeight / 2 - modalHeight / 2) + 'px;left:' + (windowWidth / 2 - modalWidth / 2) + 'px;height:' + modalHeight + 'px;width:' + modalWidth + 'px;transform: translateY(0) translateX(0)'); //change modal modalBodyBg height/width\n\n        self.modalBodyBg.style.height = modalHeight + 'px';\n        self.modalBodyBg.style.transform = 'scaleY(1) scaleX(' + BodyBgScaleX + ')';\n        self.modalBodyBg.style.width = '1px'; //set modalHeader width\n\n        self.modalHeader.setAttribute('style', 'width:' + eventWidth + 'px'); //set modalBody left margin\n\n        self.modalBody.setAttribute('style', 'margin-left:' + eventWidth + 'px'); //change modal modalHeaderBg height/width and scale it\n\n        self.modalHeaderBg.setAttribute('style', 'height: ' + eventHeight + 'px;width:' + eventWidth + 'px; transform:scaleY(' + HeaderBgScaleY + ');');\n      }, 10);\n      setTimeout(function () {\n        Util.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n        self.animating = false;\n      }, 20);\n    }\n  };\n\n  ScheduleTemplate.prototype.loadEventContent = function (content) {\n    // load the content of an event when user selects it\n    var self = this;\n    httpRequest = new XMLHttpRequest();\n\n    httpRequest.onreadystatechange = function () {\n      if (httpRequest.readyState === XMLHttpRequest.DONE) {\n        if (httpRequest.status === 200) {\n          self.modal.getElementsByClassName('cd-schedule-modal__event-info')[0].innerHTML = self.getEventContent(httpRequest.responseText);\n          Util.addClass(self.modal, 'cd-schedule-modal--content-loaded');\n        }\n      }\n    };\n\n    httpRequest.open('GET', content + '.html');\n    httpRequest.send();\n  };\n\n  ScheduleTemplate.prototype.getEventContent = function (string) {\n    // reset the loaded event content so that it can be inserted in the modal\n    var div = document.createElement('div');\n    div.innerHTML = string.trim();\n    return div.getElementsByClassName('cd-schedule-modal__event-info')[0].innerHTML;\n  };\n\n  ScheduleTemplate.prototype.animationFallback = function () {\n    if (!this.supportAnimation) {\n      // fallback for browsers not supporting transitions\n      var event = new CustomEvent('transitionend');\n      self.modal.dispatchEvent(event);\n      self.modalHeaderBg.dispatchEvent(event);\n    }\n  };\n\n  ScheduleTemplate.prototype.mq = function () {\n    //get MQ value ('desktop' or 'mobile') \n    var self = this;\n    return window.getComputedStyle(this.element, '::before').getPropertyValue('content').replace(/'|\"/g, \"\");\n  };\n\n  function getScheduleTimestamp(time) {\n    //accepts hh:mm format - convert hh:mm to timestamp\n    time = time.replace(/ /g, '');\n    var timeArray = time.split(':');\n    var timeStamp = parseInt(timeArray[0]) * 60 + parseInt(timeArray[1]);\n    return timeStamp;\n  }\n\n  ;\n  var scheduleTemplate = document.getElementsByClassName('js-cd-schedule'),\n      scheduleTemplateArray = [],\n      resizing = false;\n\n  if (scheduleTemplate.length > 0) {\n    // init ScheduleTemplate objects\n    for (var i = 0; i < scheduleTemplate.length; i++) {\n      (function (i) {\n        scheduleTemplateArray.push(new ScheduleTemplate(scheduleTemplate[i]));\n      })(i);\n    }\n\n    window.addEventListener('resize', function (event) {\n      // on resize - update events position and modal position (if open)\n      if (!resizing) {\n        resizing = true;\n        !window.requestAnimationFrame ? setTimeout(checkResize, 250) : window.requestAnimationFrame(checkResize);\n      }\n    });\n    window.addEventListener('keyup', function (event) {\n      // close event modal when pressing escape key\n      if (event.keyCode && event.keyCode == 27 || event.key && event.key.toLowerCase() == 'escape') {\n        for (var i = 0; i < scheduleTemplateArray.length; i++) {\n          scheduleTemplateArray[i].closeModal();\n        }\n      }\n    });\n\n    function checkResize() {\n      for (var i = 0; i < scheduleTemplateArray.length; i++) {\n        scheduleTemplateArray[i].scheduleReset();\n      }\n\n      resizing = false;\n    }\n\n    ;\n  }\n})();","map":{"version":3,"sources":["C:/Users/Lenovo 110/Desktop/crs-scheduler/crs-scheduler/src/js/main.js"],"names":["ScheduleTemplate","element","timelineItems","getElementsByClassName","getElementsByTagName","timelineStart","getScheduleTimestamp","textContent","timelineUnitDuration","topInfoElement","singleEvents","modal","modalHeader","modalHeaderBg","modalBody","modalBodyBg","modalClose","modalDate","modalEventName","coverLayer","modalMaxWidth","modalMaxHeight","animating","supportAnimation","Util","cssSupports","initSchedule","prototype","scheduleReset","initEvents","mq","loaded","hasClass","modalOpen","addClass","placeEvents","checkEventModal","removeClass","resetEventsStyle","i","length","removeAttribute","self","slotHeight","offsetHeight","anchor","start","getAttribute","duration","eventTop","eventHeight","setAttribute","addEventListener","event","preventDefault","openModal","closeModal","target","loadEventContent","setTimeout","closest","cb","removeEventListener","eventPosition","getBoundingClientRect","top","eventLeft","left","eventWidth","offsetWidth","windowWidth","window","innerWidth","windowHeight","innerHeight","modalWidth","modalHeight","modalTranslateX","parseInt","modalTranslateY","HeaderBgScaleY","BodyBgScaleX","animationFallback","item","modalStyle","getComputedStyle","modalTop","Number","getPropertyValue","replace","modalLeft","style","width","height","transform","content","httpRequest","XMLHttpRequest","onreadystatechange","readyState","DONE","status","innerHTML","getEventContent","responseText","open","send","string","div","document","createElement","trim","CustomEvent","dispatchEvent","time","timeArray","split","timeStamp","scheduleTemplate","scheduleTemplateArray","resizing","push","requestAnimationFrame","checkResize","keyCode","key","toLowerCase"],"mappings":"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","sourcesContent":["\n\n(function() {\n\t// Schedule Template - by CodyHouse.co\n\tfunction ScheduleTemplate( element ) {\n\t\tthis.element = element;\n\t\tthis.timelineItems = this.element.getElementsByClassName('cd-schedule__timeline')[0].getElementsByTagName('li');\n\t\tthis.timelineStart = getScheduleTimestamp(this.timelineItems[0].textContent);\n\t\tthis.timelineUnitDuration = getScheduleTimestamp(this.timelineItems[1].textContent) - getScheduleTimestamp(this.timelineItems[0].textContent);\n\t\t\n\t\tthis.topInfoElement = this.element.getElementsByClassName('cd-schedule__top-info')[0];\n\t\tthis.singleEvents = this.element.getElementsByClassName('cd-schedule__event');\n\t\t\n\t\tthis.modal = this.element.getElementsByClassName('cd-schedule-modal')[0];\n\t\tthis.modalHeader = this.element.getElementsByClassName('cd-schedule-modal__header')[0];\n\t\tthis.modalHeaderBg = this.element.getElementsByClassName('cd-schedule-modal__header-bg')[0];\n\t\tthis.modalBody = this.element.getElementsByClassName('cd-schedule-modal__body')[0];\n\t\tthis.modalBodyBg = this.element.getElementsByClassName('cd-schedule-modal__body-bg')[0];\n\t\tthis.modalClose = this.modal.getElementsByClassName('cd-schedule-modal__close')[0];\n\t\tthis.modalDate = this.modal.getElementsByClassName('cd-schedule-modal__date')[0];\n\t\tthis.modalEventName = this.modal.getElementsByClassName('cd-schedule-modal__name')[0];\n\t\tthis.coverLayer = this.element.getElementsByClassName('cd-schedule__cover-layer')[0];\n\n\t\tthis.modalMaxWidth = 800;\n\t\tthis.modalMaxHeight = 480;\n\n\t\tthis.animating = false;\n\t\tthis.supportAnimation = Util.cssSupports('transition');\n\n\t\tthis.initSchedule();\n\t};\n\n\tScheduleTemplate.prototype.initSchedule = function() {\n\t\tthis.scheduleReset();\n\t\tthis.initEvents();\n\t};\n\n\tScheduleTemplate.prototype.scheduleReset = function() {\n\t\t// according to the mq value, init the style of the template\n\t\tvar mq = this.mq(),\n\t\t\tloaded = Util.hasClass(this.element, 'js-schedule-loaded'),\n\t\t\tmodalOpen = Util.hasClass(this.modal, 'cd-schedule-modal--open');\n\t\tif( mq == 'desktop' && !loaded ) {\n\t\t\tUtil.addClass(this.element, 'js-schedule-loaded');\n\t\t\tthis.placeEvents();\n\t\t\tmodalOpen && this.checkEventModal(modalOpen);\n\t\t} else if( mq == 'mobile' && loaded) {\n\t\t\t//in this case you are on a mobile version (first load or resize from desktop)\n\t\t\tUtil.removeClass(this.element, 'cd-schedule--loading js-schedule-loaded');\n\t\t\tthis.resetEventsStyle();\n\t\t\tmodalOpen && this.checkEventModal();\n\t\t} else if( mq == 'desktop' && modalOpen ) {\n\t\t\t//on a mobile version with modal open - need to resize/move modal window\n\t\t\tthis.checkEventModal(modalOpen);\n\t\t\tUtil.removeClass(this.element, 'cd-schedule--loading');\n\t\t} else {\n\t\t\tUtil.removeClass(this.element, 'cd-schedule--loading');\n\t\t}\n\t};\n\n\tScheduleTemplate.prototype.resetEventsStyle = function() {\n\t\t// remove js style applied to the single events\n\t\tfor(var i = 0; i < this.singleEvents.length; i++) {\n\t\t\tthis.singleEvents[i].removeAttribute('style');\n\t\t}\n\t};\n\n\tScheduleTemplate.prototype.placeEvents = function() {\n\t\t// on big devices - place events in the template according to their time/day\n\t\tvar self = this,\n\t\t\tslotHeight = this.topInfoElement.offsetHeight;\n\t\tfor(var i = 0; i < this.singleEvents.length; i++) {\n\t\t\tvar anchor = this.singleEvents[i].getElementsByTagName('a')[0];\n\t\t\tvar start = getScheduleTimestamp(anchor.getAttribute('data-start')),\n\t\t\t\tduration = getScheduleTimestamp(anchor.getAttribute('data-end')) - start;\n\n\t\t\tvar eventTop = slotHeight*(start - self.timelineStart)/self.timelineUnitDuration,\n\t\t\t\teventHeight = slotHeight*duration/self.timelineUnitDuration;\n\n\t\t\tthis.singleEvents[i].setAttribute('style', 'top: '+(eventTop-1)+'px; height: '+(eventHeight +1)+'px');\n\t\t}\n\n\t\tUtil.removeClass(this.element, 'cd-schedule--loading');\n\t};\n\n\tScheduleTemplate.prototype.initEvents = function() {\n\t\tvar self = this;\n\t\tfor(var i = 0; i < this.singleEvents.length; i++) {\n\t\t\t// open modal when user selects an event\n\t\t\tthis.singleEvents[i].addEventListener('click', function(event){\n\t\t\t\tevent.preventDefault();\n\t\t\t\tif(!self.animating) self.openModal(this.getElementsByTagName('a')[0]);\n\t\t\t});\n\t\t}\n\t\t//close modal window\n\t\tthis.modalClose.addEventListener('click', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tif( !self.animating ) self.closeModal();\n\t\t});\n\t\tthis.coverLayer.addEventListener('click', function(event){\n\t\t\tevent.preventDefault();\n\t\t\tif( !self.animating ) self.closeModal();\n\t\t});\n\t};\n\n\tScheduleTemplate.prototype.openModal = function(target) {\n\t\tvar self = this;\n\t\tvar mq = self.mq();\n\t\tthis.animating = true;\n\n\t\t//update event name and time\n\t\tthis.modalEventName.textContent = target.getElementsByTagName('em')[0].textContent;\n\t\tthis.modalDate.textContent = target.getAttribute('data-start')+' - '+target.getAttribute('data-end');\n\t\tthis.modal.setAttribute('data-event', target.getAttribute('data-event'));\n\n\t\t//update event content\n\t\tthis.loadEventContent(target.getAttribute('data-content'));\n\n\t\tUtil.addClass(this.modal, 'cd-schedule-modal--open');\n\t\t\n\t\tsetTimeout(function(){\n\t\t\t//fixes a flash when an event is selected - desktop version only\n\t\t\tUtil.addClass(target.closest('li'), 'cd-schedule__event--selected');\n\t\t}, 10);\n\n\t\tif( mq == 'mobile' ) {\n\t\t\tself.modal.addEventListener('transitionend', function cb(){\n\t\t\t\tself.animating = false;\n\t\t\t\tself.modal.removeEventListener('transitionend', cb);\n\t\t\t});\n\t\t} else {\n\t\t\tvar eventPosition = target.getBoundingClientRect(),\n\t\t\t\teventTop = eventPosition.top,\n\t\t\t\teventLeft = eventPosition.left,\n\t\t\t\teventHeight = target.offsetHeight,\n\t\t\t\teventWidth = target.offsetWidth;\n\n\t\t\tvar windowWidth = window.innerWidth,\n\t\t\t\twindowHeight = window.innerHeight;\n\n\t\t\tvar modalWidth = ( windowWidth*.8 > self.modalMaxWidth ) ? self.modalMaxWidth : windowWidth*.8,\n\t\t\t\tmodalHeight = ( windowHeight*.8 > self.modalMaxHeight ) ? self.modalMaxHeight : windowHeight*.8;\n\n\t\t\tvar modalTranslateX = parseInt((windowWidth - modalWidth)/2 - eventLeft),\n\t\t\t\tmodalTranslateY = parseInt((windowHeight - modalHeight)/2 - eventTop);\n\t\t\t\n\t\t\tvar HeaderBgScaleY = modalHeight/eventHeight,\n\t\t\t\tBodyBgScaleX = (modalWidth - eventWidth);\n\n\t\t\t//change modal height/width and translate it\n\t\t\tself.modal.setAttribute('style', 'top:'+eventTop+'px;left:'+eventLeft+'px;height:'+modalHeight+'px;width:'+modalWidth+'px;transform: translateY('+modalTranslateY+'px) translateX('+modalTranslateX+'px)');\n\t\t\t//set modalHeader width\n\t\t\tself.modalHeader.setAttribute('style', 'width:'+eventWidth+'px');\n\t\t\t//set modalBody left margin\n\t\t\tself.modalBody.setAttribute('style', 'margin-left:'+eventWidth+'px');\n\t\t\t//change modalBodyBg height/width ans scale it\n\t\t\tself.modalBodyBg.setAttribute('style', 'height:'+eventHeight+'px; width: 1px; transform: scaleY('+HeaderBgScaleY+') scaleX('+BodyBgScaleX+')');\n\t\t\t//change modal modalHeaderBg height/width and scale it\n\t\t\tself.modalHeaderBg.setAttribute('style', 'height: '+eventHeight+'px; width: '+eventWidth+'px; transform: scaleY('+HeaderBgScaleY+')');\n\t\t\t\n\t\t\tself.modalHeaderBg.addEventListener('transitionend', function cb(){\n\t\t\t\t//wait for the  end of the modalHeaderBg transformation and show the modal content\n\t\t\t\tself.animating = false;\n\t\t\t\tUtil.addClass(self.modal, 'cd-schedule-modal--animation-completed');\n\t\t\t\tself.modalHeaderBg.removeEventListener('transitionend', cb);\n\t\t\t});\n\t\t}\n\n\t\t//if browser do not support transitions -> no need to wait for the end of it\n\t\tthis.animationFallback();\n\t};\n\n\tScheduleTemplate.prototype.closeModal = function() {\n\t\tvar self = this;\n\t\tvar mq = self.mq();\n\n\t\tvar item = self.element.getElementsByClassName('cd-schedule__event--selected')[0],\n\t\t\ttarget = item.getElementsByTagName('a')[0];\n\n\t\tthis.animating = true;\n\n\t\tif( mq == 'mobile' ) {\n\t\t\tUtil.removeClass(this.modal, 'cd-schedule-modal--open');\n\t\t\tself.modal.addEventListener('transitionend', function cb(){\n\t\t\t\tUtil.removeClass(self.modal, 'cd-schedule-modal--content-loaded');\n\t\t\t\tUtil.removeClass(item, 'cd-schedule__event--selected');\n\t\t\t\tself.animating = false;\n\t\t\t\tself.modal.removeEventListener('transitionend', cb);\n\t\t\t});\n\t\t} else {\n\t\t\tvar eventPosition = target.getBoundingClientRect(),\n\t\t\t\teventTop = eventPosition.top,\n\t\t\t\teventLeft = eventPosition.left,\n\t\t\t\teventHeight = target.offsetHeight,\n\t\t\t\teventWidth = target.offsetWidth;\n\n\t\t\tvar modalStyle = window.getComputedStyle(self.modal),\n\t\t\t\tmodalTop = Number(modalStyle.getPropertyValue('top').replace('px', '')),\n\t\t\t\tmodalLeft = Number(modalStyle.getPropertyValue('left').replace('px', ''));\n\n\t\t\tvar modalTranslateX = eventLeft - modalLeft,\n\t\t\t\tmodalTranslateY = eventTop - modalTop;\n\n\t\t\tUtil.removeClass(this.modal, 'cd-schedule-modal--open cd-schedule-modal--animation-completed');\n\n\t\t\t//change modal width/height and translate it\n\t\t\tself.modal.style.width = eventWidth+'px';self.modal.style.height = eventHeight+'px';self.modal.style.transform = 'translateX('+modalTranslateX+'px) translateY('+modalTranslateY+'px)';\n\t\t\t//scale down modalBodyBg element\n\t\t\tself.modalBodyBg.style.transform = 'scaleX(0) scaleY(1)';\n\t\t\t//scale down modalHeaderBg element\n\t\t\t// self.modalHeaderBg.setAttribute('style', 'transform: scaleY(1)');\n\t\t\tself.modalHeaderBg.style.transform = 'scaleY(1)';\n\n\t\t\tself.modalHeaderBg.addEventListener('transitionend', function cb(){\n\t\t\t\t//wait for the  end of the modalHeaderBg transformation and reset modal style\n\t\t\t\tUtil.addClass(self.modal, 'cd-schedule-modal--no-transition');\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tself.modal.removeAttribute('style');\n\t\t\t\t\tself.modalBody.removeAttribute('style');\n\t\t\t\t\tself.modalHeader.removeAttribute('style');\n\t\t\t\t\tself.modalHeaderBg.removeAttribute('style');\n\t\t\t\t\tself.modalBodyBg.removeAttribute('style');\n\t\t\t\t}, 10);\n\t\t\t\tsetTimeout(function(){\n\t\t\t\t\tUtil.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n\t\t\t\t}, 20);\n\t\t\t\tself.animating = false;\n\t\t\t\tUtil.removeClass(self.modal, 'cd-schedule-modal--content-loaded');\n\t\t\t\tUtil.removeClass(item, 'cd-schedule__event--selected');\n\t\t\t\tself.modalHeaderBg.removeEventListener('transitionend', cb);\n\t\t\t});\n\t\t}\n\n\t\t//if browser do not support transitions -> no need to wait for the end of it\n\t\tthis.animationFallback();\n\t};\n\n\tScheduleTemplate.prototype.checkEventModal = function(modalOpen) {\n\t\t// this function is used on resize to reset events/modal style\n\t\tthis.animating = true;\n\t\tvar self = this;\n\t\tvar mq = this.mq();\n\t\tif( mq == 'mobile' ) {\n\t\t\t//reset modal style on mobile\n\t\t\tself.modal.removeAttribute('style');\n\t\t\tself.modalBody.removeAttribute('style');\n\t\t\tself.modalHeader.removeAttribute('style');\n\t\t\tself.modalHeaderBg.removeAttribute('style');\n\t\t\tself.modalBodyBg.removeAttribute('style');\n\t\t\tUtil.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n\t\t\tself.animating = false;\t\n\t\t} else if( mq == 'desktop' && modalOpen) {\n\t\t\tUtil.addClass(self.modal, 'cd-schedule-modal--no-transition cd-schedule-modal--animation-completed');\n\t\t\tvar item = self.element.getElementsByClassName('cd-schedule__event--selected')[0],\n\t\t\t\ttarget = item.getElementsByTagName('a')[0];\n\n\t\t\tvar eventPosition = target.getBoundingClientRect(),\n\t\t\t\teventTop = eventPosition.top,\n\t\t\t\teventLeft = eventPosition.left,\n\t\t\t\teventHeight = target.offsetHeight,\n\t\t\t\teventWidth = target.offsetWidth;\n\n\t\t\tvar windowWidth = window.innerWidth,\n\t\t\t\twindowHeight = window.innerHeight;\n\n\t\t\tvar modalWidth = ( windowWidth*.8 > self.modalMaxWidth ) ? self.modalMaxWidth : windowWidth*.8,\n\t\t\t\tmodalHeight = ( windowHeight*.8 > self.modalMaxHeight ) ? self.modalMaxHeight : windowHeight*.8;\n\n\t\t\tvar HeaderBgScaleY = modalHeight/eventHeight,\n\t\t\t\tBodyBgScaleX = (modalWidth - eventWidth);\n\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.modal.setAttribute('style', 'top:'+(windowHeight/2 - modalHeight/2)+'px;left:'+(windowWidth/2 - modalWidth/2)+'px;height:'+modalHeight+'px;width:'+modalWidth+'px;transform: translateY(0) translateX(0)');\n\t\t\t\t//change modal modalBodyBg height/width\n\t\t\t\tself.modalBodyBg.style.height = modalHeight+'px';self.modalBodyBg.style.transform = 'scaleY(1) scaleX('+BodyBgScaleX+')';self.modalBodyBg.style.width = '1px';\n\t\t\t\t//set modalHeader width\n\t\t\t\tself.modalHeader.setAttribute('style', 'width:'+eventWidth+'px');\n\t\t\t\t//set modalBody left margin\n\t\t\t\tself.modalBody.setAttribute('style', 'margin-left:'+eventWidth+'px');\n\t\t\t\t//change modal modalHeaderBg height/width and scale it\n\t\t\t\tself.modalHeaderBg.setAttribute('style', 'height: '+eventHeight+'px;width:'+eventWidth+'px; transform:scaleY('+HeaderBgScaleY+');');\n\t\t\t}, 10);\n\n\t\t\tsetTimeout(function(){\n\t\t\t\tUtil.removeClass(self.modal, 'cd-schedule-modal--no-transition');\n\t\t\t\tself.animating = false;\t\n\t\t\t}, 20);\n\n\t\t}\n\t};\n\n\tScheduleTemplate.prototype.loadEventContent = function(content) {\n\t\t// load the content of an event when user selects it\n\t\tvar self = this;\n\n\t\thttpRequest = new XMLHttpRequest();\n\t\thttpRequest.onreadystatechange = function() {\n\t\t\tif (httpRequest.readyState === XMLHttpRequest.DONE) {\n\t      if (httpRequest.status === 200) {\n\t      \tself.modal.getElementsByClassName('cd-schedule-modal__event-info')[0].innerHTML = self.getEventContent(httpRequest.responseText); \n\t      \tUtil.addClass(self.modal, 'cd-schedule-modal--content-loaded');\n\t      }\n\t    }\n\t\t};\n\t\thttpRequest.open('GET', content+'.html');\n    httpRequest.send();\n\t};\n\n\tScheduleTemplate.prototype.getEventContent = function(string) {\n\t\t// reset the loaded event content so that it can be inserted in the modal\n\t\tvar div = document.createElement('div');\n\t\tdiv.innerHTML = string.trim();\n\t\treturn div.getElementsByClassName('cd-schedule-modal__event-info')[0].innerHTML;\n\t};\n\n\tScheduleTemplate.prototype.animationFallback = function() {\n\t\tif( !this.supportAnimation ) { // fallback for browsers not supporting transitions\n\t\t\tvar event = new CustomEvent('transitionend');\n\t\t\tself.modal.dispatchEvent(event);\n\t\t\tself.modalHeaderBg.dispatchEvent(event);\n\t\t}\n\t};\n\n\tScheduleTemplate.prototype.mq = function(){\n\t\t//get MQ value ('desktop' or 'mobile') \n\t\tvar self = this;\n\t\treturn window.getComputedStyle(this.element, '::before').getPropertyValue('content').replace(/'|\"/g, \"\");\n\t};\n\n\tfunction getScheduleTimestamp(time) {\n\t\t//accepts hh:mm format - convert hh:mm to timestamp\n\t\ttime = time.replace(/ /g,'');\n\t\tvar timeArray = time.split(':');\n\t\tvar timeStamp = parseInt(timeArray[0])*60 + parseInt(timeArray[1]);\n\t\treturn timeStamp;\n\t};\n\n\tvar scheduleTemplate = document.getElementsByClassName('js-cd-schedule'),\t\n\t\tscheduleTemplateArray = [],\n\t\tresizing = false;\n\tif( scheduleTemplate.length > 0 ) { // init ScheduleTemplate objects\n\t\tfor( var i = 0; i < scheduleTemplate.length; i++) {\n\t\t\t(function(i){\n\t\t\t\tscheduleTemplateArray.push(new ScheduleTemplate(scheduleTemplate[i]));\n\t\t\t})(i);\n\t\t}\n\n\t\twindow.addEventListener('resize', function(event) { \n\t\t\t// on resize - update events position and modal position (if open)\n\t\t\tif( !resizing ) {\n\t\t\t\tresizing = true;\n\t\t\t\t(!window.requestAnimationFrame) ? setTimeout(checkResize, 250) : window.requestAnimationFrame(checkResize);\n\t\t\t}\n\t\t});\n\n\t\twindow.addEventListener('keyup', function(event){\n\t\t\t// close event modal when pressing escape key\n\t\t\tif( event.keyCode && event.keyCode == 27 || event.key && event.key.toLowerCase() == 'escape' ) {\n\t\t\t\tfor(var i = 0; i < scheduleTemplateArray.length; i++) {\n\t\t\t\t\tscheduleTemplateArray[i].closeModal();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tfunction checkResize(){\n\t\t\tfor(var i = 0; i < scheduleTemplateArray.length; i++) {\n\t\t\t\tscheduleTemplateArray[i].scheduleReset();\n\t\t\t}\n\t\t\tresizing = false;\n\t\t};\n\t}\n}());\n\n"]},"metadata":{},"sourceType":"module"}